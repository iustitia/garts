{% extends "base.html" %}
{% load i18n%}

{% load quiz_tags %}

{% block title %} {{ quiz.title }} {% endblock %}
{% block description %} {{ quiz.title }} - {{ quiz.description }} {% endblock %}

{% block content %}
<script>
function removeAns() {
    document.getElementById("next").style.visibility = "visible";
    document.getElementById("previous_div").remove();
}

function recalculate_progress(q, n){
	var progress = (q/n) * 100;
	console.log(progress);
	console.log(progress.toString().concat("%"));
	document.getElementById("pr_bar").style.width = progress.toString().concat("%");
}
</script>

<div class="progress">
    <div id="pr_bar" class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
    </div>
</div>

{% if previous.answers %}

<div id="previous_div">
  <p class="muted"><small>{% trans "The previous question" %}:</small></p>
  <p>{{ previous.previous_question }}</p>

  {% if previous.previous_outcome %}
	<div class="alert alert-success">
  {% else %}
	<div class="alert alert-warning">
  {% endif %}
  	  <p><small>
		{% trans "Your answer was" %} </small>
		<strong>
		  {{ previous.previous_outcome|yesno:"correct,incorrect" }}
		</strong>
	  </p>

	</div>

    <button onclick="removeAns()">Next question</button>
	<hr>
</div>
{% endif %}

{% if question %}
<div class="row text-center">
<header class="jumbotron hero-spacer">
    {% if previous.answers %}
        <div id="next" style="visibility: hidden;">
    {% endif %}


    <p class="lead">{{ question.content }}</p>

    {% if question.figure %}
        <img src="{{ question.figure.url }}" alt="{{ question.content }}" />
    {% endif %}

    <form action="" method="POST">{% csrf_token %}

        {% for answer in form.answers %}
          <a class="btn btn-default">
            {{ answer }}
          </a>
        {% endfor %}

      <input style="hidden" type="submit" value={% trans "Check" %} class="btn btn-large btn-block btn-warning" onclick="recalculate_progress({{ progress.0|add:1 }}, {{ progress.1 }})">
    </form>

</header>
</div>
{% endif %}

        {% if previous.answers %}
 </div>
        {% endif %}
<hr>


{% endblock %}
